================================================================================
DATABASE SEEDER - AN√ÅLISIS COMPLETO PRE-GENERACI√ìN
================================================================================
Fecha: 2024
Proyecto: DBTest-BACK (BOSKO E-Commerce API)
Target Framework: .NET 8
================================================================================

‚úÖ PASO 1 ‚Äî AN√ÅLISIS DEL PROYECTO COMPLETADO

================================================================================
üìä RESUMEN DE ENTIDADES (DbSets en AppDbContext)
================================================================================

Total de entidades: 12 (+ 1 legacy)

ENTIDADES PRINCIPALES:
1.  Users                   ‚úÖ Analizada
2.  UserPreferences         ‚úÖ Analizada
3.  Categories              ‚úÖ Analizada
4.  Products                ‚úÖ Analizada
5.  Addresses               ‚úÖ Analizada
6.  Orders                  ‚úÖ Analizada
7.  OrderItems              ‚úÖ Analizada
8.  ShippingAddresses       ‚úÖ Analizada
9.  OrderStatusHistory      ‚úÖ Analizada
10. ActivityLogs            ‚úÖ Analizada
11. Notifications           ‚úÖ Analizada
12. PasswordResetTokens     ‚úÖ Analizada

LEGACY:
13. Productos               ‚ö†Ô∏è  No incluir en seeder (tabla antigua)

================================================================================
üîç AN√ÅLISIS DETALLADO POR ENTIDAD
================================================================================

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
1. USERS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: Users
Fluent API: ‚úÖ Configurada
Relaciones: 
  - 1:1 con UserPreferences (Cascade)
  - 1:N con Orders (como Customer, Restrict)
  - 1:N con Addresses (Cascade)
  - 1:N con Notifications
  - 1:N con ActivityLogs

PROPIEDADES REQUERIDAS:
  ‚úÖ Name              [MaxLength: 150]
  ‚úÖ Email             [MaxLength: 150] [UNIQUE INDEX]
  ‚úÖ Role              [MaxLength: 50]  Default: "Customer"
  ‚úÖ Provider          [MaxLength: 50]  Default: "Local"
  ‚úÖ IsActive          Default: true
  ‚úÖ CreatedAt         
  ‚úÖ UpdatedAt

PROPIEDADES OPCIONALES:
  ‚ö™ PasswordHash      [MaxLength: 255] - NULL si Provider != "Local"
  ‚ö™ Phone             [MaxLength: 50]
  ‚ö™ AvatarUrl         [MaxLength: 500]

REGLAS DE NEGOCIO:
  üîê Si Provider = "Local" ‚Üí PasswordHash REQUERIDO
  üîê Si Provider = "Google" ‚Üí PasswordHash puede ser NULL
  üìß Email DEBE ser √∫nico (√≠ndice √∫nico en DB)
  üë§ Roles v√°lidos: "Admin", "Employee", "Customer"

DATOS A CREAR EN SEEDER:
  - 1 Admin: admin@bosko.com (Provider: Local, PasswordHash con BCrypt)
  - 2 Customers: cliente1@bosko.com, cliente2@bosko.com

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2. USERPREFERENCES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: UserPreferences
Fluent API: ‚úÖ Configurada
Relaciones: 
  - 1:1 con User (Cascade) [UNIQUE INDEX en UserId]

PROPIEDADES REQUERIDAS:
  ‚úÖ UserId            [UNIQUE]
  ‚úÖ Notifications     Default: true
  ‚úÖ Newsletter        Default: true
  ‚úÖ CreatedAt

PROPIEDADES OPCIONALES:
  ‚ö™ Language          [MaxLength: 10] Default: "es"
  ‚ö™ UpdatedAt

REGLAS DE NEGOCIO:
  üîí Un User solo puede tener UNA UserPreferences (relaci√≥n 1:1)
  üìå UserId debe ser √∫nico

DATOS A CREAR EN SEEDER:
  - 1 preferencia por cada usuario creado (3 total)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
3. CATEGORIES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: Categories
Fluent API: ‚úÖ Configurada
Relaciones: 
  - 1:N con Products (SetNull si se elimina categor√≠a)

PROPIEDADES REQUERIDAS:
  ‚úÖ Name              [MaxLength: 100]
  ‚úÖ Description       [MaxLength: 500] ‚ö†Ô∏è REQUIRED (importante!)
  ‚úÖ CreatedAt

PROPIEDADES OPCIONALES:
  ‚ö™ Image             [MaxLength: 500]

REGLAS DE NEGOCIO:
  üìù Description es OBLIGATORIO (no puede ser vac√≠o ni null)
  üè∑Ô∏è  Name debe ser descriptivo

DATOS A CREAR EN SEEDER:
  - Bebidas (descripci√≥n requerida)
  - Snacks (descripci√≥n requerida)
  - L√°cteos (descripci√≥n requerida)
  - Frutas y Verduras (descripci√≥n requerida)
  - Hogar y Limpieza (descripci√≥n requerida)
  - Carnes y Embutidos (descripci√≥n requerida)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
4. PRODUCTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: Products
Fluent API: ‚úÖ Configurada
Relaciones: 
  - N:1 con Category (SetNull) [CategoryId nullable]
  - 1:N con OrderItems (Restrict)

PROPIEDADES REQUERIDAS:
  ‚úÖ Name              [MaxLength: 200] [INDEX]
  ‚úÖ Price             [decimal(10,2)]
  ‚úÖ Stock             Default: 0
  ‚úÖ CreatedAt

PROPIEDADES OPCIONALES:
  ‚ö™ Description       [MaxLength: 1000]
  ‚ö™ Image             [MaxLength: 500]
  ‚ö™ CategoryId        Nullable (SetNull behavior)

REGLAS DE NEGOCIO:
  üí∞ Price debe ser > 0
  üì¶ Stock puede ser 0 o positivo
  üè∑Ô∏è  CategoryId puede ser NULL si la categor√≠a se elimina

DATOS A CREAR EN SEEDER:
  - M√≠nimo 15 productos
  - Precios realistas (10.00 - 500.00)
  - Stock variado (0 - 100)
  - Relacionar con categor√≠as existentes

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
5. ADDRESSES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: Addresses
Fluent API: ‚úÖ Configurada (recientemente agregada)
Relaciones: 
  - N:1 con User (Cascade)

PROPIEDADES REQUERIDAS:
  ‚úÖ UserId            [INDEX: IX_Addresses_UserId]
  ‚úÖ Street            [MaxLength: 200]
  ‚úÖ City              [MaxLength: 100]
  ‚úÖ PostalCode        [MaxLength: 20]
  ‚úÖ Country           [MaxLength: 100]
  ‚úÖ IsDefault         [INDEX compuesto: UserId_IsDefault]
  ‚úÖ CreatedAt
  ‚úÖ UpdatedAt

PROPIEDADES OPCIONALES:
  ‚ö™ Label             [MaxLength: 100]
  ‚ö™ State             [MaxLength: 100]
  ‚ö™ Phone             [MaxLength: 20]

REGLAS DE NEGOCIO:
  üè† Cada usuario puede tener m√∫ltiples direcciones
  ‚≠ê Solo UNA direcci√≥n puede ser IsDefault = true por usuario
  üìç PostalCode formato libre (4-20 caracteres)

DATOS A CREAR EN SEEDER:
  - Admin: 1 direcci√≥n (default)
  - Cliente 1: 2 direcciones (1 default, 1 secundaria)
  - Cliente 2: 1 direcci√≥n (default)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
6. ORDERS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: Orders
Fluent API: ‚úÖ Configurada
Relaciones: 
  - N:1 con User (como Customer, Restrict) [INDEX]
  - 1:N con OrderItems (Cascade)
  - 1:1 con ShippingAddress (Cascade)
  - 1:N con OrderStatusHistory (Cascade)

PROPIEDADES REQUERIDAS:
  ‚úÖ CustomerId        [INDEX: IX_Orders_CustomerId]
  ‚úÖ CustomerName      [MaxLength: 100]
  ‚úÖ CustomerEmail     [MaxLength: 255]
  ‚úÖ ShippingAddress   [MaxLength: 500] (texto simple)
  ‚úÖ Subtotal          [decimal(18,2)]
  ‚úÖ Shipping          [decimal(18,2)]
  ‚úÖ Total             [decimal(18,2)]
  ‚úÖ Status            [MaxLength: 20] [INDEX] Default: "pending"
  ‚úÖ PaymentMethod     [MaxLength: 50] Default: "credit_card"
  ‚úÖ CreatedAt         [INDEX: IX_Orders_CreatedAt]
  ‚úÖ UpdatedAt

PROPIEDADES OPCIONALES:
  ‚ö™ OrderNumber       [MaxLength: 50]
  ‚ö™ Tax               [decimal(18,2)] Default: 0
  ‚ö™ TrackingNumber    [MaxLength: 100]
  ‚ö™ Notes             [MaxLength: 500]

REGLAS DE NEGOCIO:
  üì¶ Total = Subtotal + Tax + Shipping
  üìä Status v√°lidos: "pending", "processing", "delivered", "cancelled"
  üí≥ PaymentMethod: "credit_card", "debit_card", "paypal", "cash"
  üö´ DeleteBehavior.Restrict con Customer (no eliminar usuario con √≥rdenes)

DATOS A CREAR EN SEEDER:
  - 3 √≥rdenes por cliente (6 total)
  - Status variados: pending, processing, delivered
  - Fechas escalonadas

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
7. ORDERITEMS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: OrderItems
Fluent API: ‚úÖ Configurada
Relaciones: 
  - N:1 con Order (Cascade) [INDEX]
  - N:1 con Product (Restrict) [INDEX]

PROPIEDADES REQUERIDAS:
  ‚úÖ OrderId           [INDEX: IX_OrderItems_OrderId]
  ‚úÖ ProductId         [INDEX: IX_OrderItems_ProductId]
  ‚úÖ ProductName       [MaxLength: 200]
  ‚úÖ Quantity          [Range: 1, int.MaxValue]
  ‚úÖ Price             [decimal(18,2)]
  ‚úÖ Subtotal          [decimal(18,2)]

PROPIEDADES OPCIONALES:
  ‚ö™ ProductImage      [MaxLength: 500]

REGLAS DE NEGOCIO:
  üî¢ Quantity DEBE ser >= 1
  üí∞ Subtotal = Price √ó Quantity
  üö´ Restrict con Product (no eliminar producto con √≠tems en √≥rdenes)
  ‚ôªÔ∏è  Cascade con Order (eliminar √≠tems si se elimina orden)

DATOS A CREAR EN SEEDER:
  - 1-4 √≠tems por orden
  - Subtotal calculado correctamente

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
8. SHIPPINGADDRESSES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: ShippingAddresses
Fluent API: ‚úÖ Configurada
Relaciones: 
  - 1:1 con Order (Cascade) [FK: OrderId]

PROPIEDADES REQUERIDAS:
  ‚úÖ OrderId           [UNIQUE - relaci√≥n 1:1]
  ‚úÖ FullName          [MaxLength: 100]
  ‚úÖ Phone             [MaxLength: 20]
  ‚úÖ Street            [MaxLength: 200]
  ‚úÖ City              [MaxLength: 100]
  ‚úÖ State             [MaxLength: 100]
  ‚úÖ PostalCode        [MaxLength: 20]
  ‚úÖ Country           [MaxLength: 100] Default: "M√©xico"

REGLAS DE NEGOCIO:
  üè† Cada Order DEBE tener UNA ShippingAddress
  üîí OrderId √∫nico (relaci√≥n 1:1)

DATOS A CREAR EN SEEDER:
  - 1 ShippingAddress por cada Order creada (6 total)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
9. ORDERSTATUSHISTORY
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: OrderStatusHistory
Fluent API: ‚úÖ Configurada
Relaciones: 
  - N:1 con Order (Cascade) [INDEX]

PROPIEDADES REQUERIDAS:
  ‚úÖ OrderId           [INDEX: IX_OrderStatusHistory_OrderId]
  ‚úÖ Status            [MaxLength: 20]
  ‚úÖ Timestamp         Default: DateTime.UtcNow

PROPIEDADES OPCIONALES:
  ‚ö™ Note              [MaxLength: 500]

REGLAS DE NEGOCIO:
  üìù Registra cada cambio de estado de una orden
  ‚ôªÔ∏è  Se elimina autom√°ticamente si se elimina la orden (Cascade)

DATOS A CREAR EN SEEDER:
  - 1-3 estados por orden
  - Timestamps progresivos

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
10. ACTIVITYLOGS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: ActivityLogs
Fluent API: ‚ùå NO configurada expl√≠citamente
Relaciones: 
  - N:1 con User (opcional)

PROPIEDADES REQUERIDAS:
  ‚úÖ Type              [MaxLength: 50] ("order", "product", "user", "category")
  ‚úÖ Text              [MaxLength: 500]
  ‚úÖ Timestamp         Default: DateTime.UtcNow

PROPIEDADES OPCIONALES:
  ‚ö™ UserId            Nullable

REGLAS DE NEGOCIO:
  üìä Registra actividades del sistema
  üë§ UserId puede ser NULL (acciones autom√°ticas)

DATOS A CREAR EN SEEDER:
  - 5-10 logs de actividad
  - Tipos: order, product, user

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
11. NOTIFICATIONS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: Notifications
Fluent API: ‚ùå NO configurada expl√≠citamente
Relaciones: 
  - N:1 con User

PROPIEDADES REQUERIDAS:
  ‚úÖ UserId
  ‚úÖ Title             [MaxLength: 200]
  ‚úÖ Message           [MaxLength: 500]
  ‚úÖ Type              [MaxLength: 50] ("order", "product", "user", "system")
  ‚úÖ CreatedAt         Default: DateTime.UtcNow

PROPIEDADES OPCIONALES:
  ‚ö™ IsRead            Default: false

REGLAS DE NEGOCIO:
  üì¨ Cada notificaci√≥n pertenece a un usuario
  üìñ IsRead para marcar como le√≠da

DATOS A CREAR EN SEEDER:
  - 2-3 notificaciones por usuario
  - Tipos variados
  - Algunas le√≠das, otras no

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
12. PASSWORDRESETTOKENS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
Tabla: PasswordResetTokens
Fluent API: ‚úÖ Configurada
Relaciones: 
  - N:1 con User (Cascade)

PROPIEDADES REQUERIDAS:
  ‚úÖ UserId
  ‚úÖ Token             [MaxLength: 255]
  ‚úÖ ExpiresAt
  ‚úÖ IsUsed            Default: false
  ‚úÖ CreatedAt

REGLAS DE NEGOCIO:
  üîê Token para reseteo de contrase√±a
  ‚è∞ ExpiresAt valida vigencia
  ‚úÖ IsUsed para marcar como usado

DATOS A CREAR EN SEEDER:
  ‚ö†Ô∏è  NO crear tokens en seeder (sensible y no necesario)

================================================================================
üîó ORDEN DE INSERCI√ìN (RESPETANDO DEPENDENCIAS FK)
================================================================================

NIVEL 1 - SIN DEPENDENCIAS:
  1. Users
  2. Categories

NIVEL 2 - DEPENDEN DE NIVEL 1:
  3. UserPreferences    (requiere Users)
  4. Products           (requiere Categories - opcional)
  5. Addresses          (requiere Users)

NIVEL 3 - DEPENDEN DE NIVEL 1-2:
  6. Orders             (requiere Users como CustomerId)

NIVEL 4 - DEPENDEN DE NIVEL 3:
  7. OrderItems         (requiere Orders + Products)
  8. ShippingAddresses  (requiere Orders - 1:1)
  9. OrderStatusHistory (requiere Orders)
  10. Notifications     (requiere Users)
  11. ActivityLogs      (requiere Users - opcional)

NO CREAR:
  ‚ùå PasswordResetTokens (no necesario en seeder)
  ‚ùå Productos (tabla legacy)

================================================================================
‚ö†Ô∏è RESTRICCIONES CR√çTICAS A RESPETAR
================================================================================

üö´ DELETE BEHAVIOR:
  - Products ‚Üí Category:        SetNull (CategoryId puede quedar NULL)
  - Orders ‚Üí Customer (User):   Restrict (NO eliminar usuarios con √≥rdenes)
  - OrderItems ‚Üí Product:       Restrict (NO eliminar productos en √≥rdenes)
  - OrderItems ‚Üí Order:         Cascade (eliminar items con orden)
  - ShippingAddress ‚Üí Order:    Cascade (eliminar con orden)
  - OrderStatusHistory ‚Üí Order: Cascade (eliminar con orden)
  - UserPreferences ‚Üí User:     Cascade (eliminar con usuario)
  - Addresses ‚Üí User:           Cascade (eliminar con usuario)

üîí √çNDICES √öNICOS:
  - Users.Email                 DEBE ser √∫nico
  - UserPreferences.UserId      DEBE ser √∫nico (1:1)

üìè MAXLENGTH:
  - Respetar todos los MaxLength definidos
  - Especial atenci√≥n en Email (150), Name (150)

üí∞ DECIMALES:
  - Products.Price:      decimal(10,2)
  - Order.Subtotal:      decimal(18,2)
  - Order.Tax:           decimal(18,2)
  - Order.Shipping:      decimal(18,2)
  - Order.Total:         decimal(18,2)
  - OrderItem.Price:     decimal(18,2)
  - OrderItem.Subtotal:  decimal(18,2)

üî¢ VALIDACIONES:
  - OrderItem.Quantity >= 1
  - Products.Stock >= 0
  - Subtotales calculados correctamente

================================================================================
‚úÖ VALIDACI√ìN ANTI-DUPLICADO
================================================================================

IMPLEMENTAR EN SEEDER:

if (!context.Users.Any())
{
    // Crear usuarios
}

if (!context.UserPreferences.Any())
{
    // Crear preferencias
}

if (!context.Categories.Any())
{
    // Crear categor√≠as
}

if (!context.Products.Any())
{
    // Crear productos
}

if (!context.Addresses.Any())
{
    // Crear direcciones
}

if (!context.Orders.Any())
{
    // Crear √≥rdenes
}

if (!context.OrderItems.Any())
{
    // Crear items
}

if (!context.ShippingAddresses.Any())
{
    // Crear shipping addresses
}

if (!context.OrderStatusHistory.Any())
{
    // Crear historial
}

if (!context.Notifications.Any())
{
    // Crear notificaciones
}

if (!context.ActivityLogs.Any())
{
    // Crear logs
}

================================================================================
üì¶ DEPENDENCIAS EXTERNAS NECESARIAS
================================================================================

‚úÖ BCrypt.Net-Next (para hashear contrase√±as)
   NuGet: BCrypt.Net-Next
   Uso: BCrypt.Net.BCrypt.HashPassword("password")

================================================================================
üéØ DATOS A CREAR EN SEEDER - RESUMEN
================================================================================

USUARIOS:
  ‚úÖ 1 Admin: admin@bosko.com
  ‚úÖ 2 Clientes: cliente1@bosko.com, cliente2@bosko.com

PREFERENCIAS:
  ‚úÖ 3 UserPreferences (1 por usuario)

CATEGOR√çAS:
  ‚úÖ 6 categor√≠as con descripci√≥n obligatoria

PRODUCTOS:
  ‚úÖ 18 productos (3 por categor√≠a)

DIRECCIONES:
  ‚úÖ 4 direcciones totales
     - Admin: 1 default
     - Cliente1: 2 (1 default)
     - Cliente2: 1 default

√ìRDENES:
  ‚úÖ 6 √≥rdenes (3 por cliente)
     - Status variados: pending, processing, delivered

ORDER ITEMS:
  ‚úÖ 12-18 items (2-3 por orden)

SHIPPING ADDRESSES:
  ‚úÖ 6 shipping addresses (1 por orden - obligatorio)

ORDER STATUS HISTORY:
  ‚úÖ 12-18 registros de historial (2-3 por orden)

NOTIFICATIONS:
  ‚úÖ 6-9 notificaciones (2-3 por usuario)

ACTIVITY LOGS:
  ‚úÖ 8-12 logs de actividad

================================================================================
‚úÖ CONCLUSI√ìN DEL AN√ÅLISIS
================================================================================

üü¢ ESTADO: TODO LISTO PARA GENERAR DATABASESEEDER

‚úÖ Todas las entidades analizadas
‚úÖ Todas las restricciones identificadas
‚úÖ Orden de inserci√≥n definido
‚úÖ Datos realistas planeados
‚úÖ Validaci√≥n anti-duplicado planeada
‚úÖ DeleteBehavior respetado
‚úÖ √çndices √∫nicos identificados
‚úÖ MaxLength respetado
‚úÖ Decimales configurados
‚úÖ Relaciones 1:1, 1:N, N:1 identificadas

‚ö†Ô∏è  CONSIDERACIONES:
  - NO crear PasswordResetTokens (innecesario)
  - NO crear Productos (tabla legacy)
  - ActivityLogs y Notifications NO tienen Fluent API expl√≠cita
    (usar DataAnnotations del modelo)

üöÄ SIGUIENTE PASO:
   Generar archivo Data/DatabaseSeeder.cs

================================================================================
FIN DEL AN√ÅLISIS
================================================================================
